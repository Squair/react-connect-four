import{r as p,j as l,T as y,G as B,B as S,a as w,b as $,C as Z,c as R,d as L,e as ee,f as ne,g as te,l as re,R as oe,h as ie}from"./vendor.df8f4c88.js";const se=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const f of i.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&c(f)}).observe(document,{childList:!0,subtree:!0});function n(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerpolicy&&(i.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?i.credentials="include":t.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(t){if(t.ep)return;t.ep=!0;const i=n(t);fetch(t.href,i)}};se();const ae=(o,s)=>{const n=[];for(let c=0;c<s;c++)n[c]=new Array(o).fill("\u26AA");return n},ce=(o,s,n,c,t)=>{const[i,f]=p.exports.useState(ae(n,c)),[m,b]=p.exports.useState(),[v,C]=p.exports.useState(!1),[h,M]=p.exports.useState(s.firstPlayerToMove);p.exports.useEffect(()=>{o.on("recieve move",e=>{const r=A(e.counter,e.column);f(r.newGameboard),!F(e.column,r.rowAdded,e.counter,r.newGameboard)&&G(e.opposingPlayerId)}),m&&o.disconnect()},[o,m]);const G=e=>M(s.players.filter(r=>r.id===e)[0]),k=e=>s.players.filter(r=>r.counter===e)[0],z=()=>s.players.filter(e=>e.id!==o.id)[0].id,T=()=>!m&&o.id===h.id,E=e=>{if(!T())return;const r=h.counter,d=A(r,e);f(d.newGameboard);const u=z(),a={opposingPlayerId:u,counter:r,column:e};o.emit("send move",a),!F(e,d.rowAdded,r,d.newGameboard)&&G(u)},F=(e,r,d,u)=>r!==void 0&&N(u,d,r,e)?(b(k(d)),!0):O(u)?(C(!0),!0):!1,A=(e,r)=>{if(I(i,r))return{rowAdded:void 0,newGameboard:i};const d=[...i];let u;for(let a=c-1;a>=0;a--)if(d[a][r]==="\u26AA"){d[a][r]=e,u=a;break}return{rowAdded:u,newGameboard:d}},O=e=>{for(let r=0;r<n;r++)if(!I(e,r))return!1;return!0},I=(e,r)=>e[0][r]!=="\u26AA",N=(e,r,d,u)=>{let a=0,x;for(let g=0;g<=n-1;g++)if(a=e[d][g]===r?a+1:0,a===t)return!0;a=0;for(let g=c-1;g>=0;g--)if(a=e[g][u]===r?a+1:0,a===t)return!0;const{descMinRow:q,descMaxRow:K}=U(d,u,c,n),{descMinCol:_,descMaxCol:J}=H(d,u,c,n);a=0,x=_;for(let g=q;g<=K;g++){if(a=e[g][x]===r?a+1:0,a===t)return!0;if(x===J)break;x++}const{ascMinRow:Q,ascMaxRow:V}=P(d,u,c,n),{ascMinCol:X,ascMaxCol:Y}=W(d,u,c,n);a=0,x=X;for(let g=V;g>=Q;g--){if(a=e[g][x]===r?a+1:0,a===t)return!0;if(x===Y)break;x++}return!1},U=(e,r,d,u)=>{const a=Math.max(0,e-r),x=Math.min(d-1,u-r+e);return{descMinRow:a,descMaxRow:x}},H=(e,r,d,u)=>{const a=Math.max(0,r-e),x=Math.min(u-1,d-1-e+r);return{descMinCol:a,descMaxCol:x}},P=(e,r,d,u)=>{const a=Math.min(d-1,e+r);return{ascMinRow:Math.max(0,e-(u-1-r)),ascMaxRow:a}},W=(e,r,d,u)=>{const a=Math.max(0,r-(d-1-e)),x=Math.min(u-1,u-1-e+r);return{ascMinCol:a,ascMaxCol:x}};return{makeMove:E,gameboard:i,currentPlayer:h,winningPlayer:m,draw:v,GameInformationText:()=>{let e;return m?e=`${m.username}(${m.counter}) has won!`:v?e="Draw!":e=`${h.username}'s (${h.counter}) turn!`,l(y,{textAlign:"center",variant:"h5",children:e})}}},le=({gridItem:o,size:s,column:n,row:c,makeMove:t})=>{const i=()=>t(n);return l(B,{item:!0,xs:s,sx:{zIndex:2,display:"flex",justifyContent:"center",alignItems:"center"},children:l(S,{"aria-label":`${c.toString()}:${n.toString()}`,onClick:i,children:l(y,{fontSize:"8vmin",sx:{textShadow:"0px 4px 4px #1F1F1F",transition:"margin 200ms"},children:o})})})},de=({gameboard:o,makeMove:s})=>{const n=()=>o.map((c,t)=>c.map((i,f)=>l(le,{gridItem:i,size:1,row:t,column:f,makeMove:s},`${t}${f}`)));return w($,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[l(B,{container:!0,columns:o[0].length,sx:{zIndex:1,background:"radial-gradient(circle, rgba(42,42,242,1) 83%, rgba(42,42,242,1) 98%, rgba(0,168,255,1) 100%, rgba(2,0,36,1) 100%, rgba(2,0,36,1) 100%, rgba(0,212,255,1) 100%)",width:"95%",boxShadow:"-5px 7px 25px 2px rgba(0,0,0,0.75)"},children:n()}),l("div",{style:{backgroundColor:"blue",border:"1px solid black",width:"97%",height:"3.5em",transform:"skew(29deg, 0deg"},children:w(y,{variant:"h3",textAlign:"center",children:[l("span",{style:{WebkitTextStroke:"50px solid black",color:"red"},children:"Connect"})," ",l("span",{style:{color:"yellow"},children:"Four"})]})})]})},ue=({socket:o,game:s,finishGame:n,columns:c,rows:t,contiguousCountersToWin:i})=>{const{gameboard:f,makeMove:m,winningPlayer:b,draw:v,GameInformationText:C}=ce(o,s,c,t,i),h=s.players.filter(G=>G.id===(o==null?void 0:o.id))[0],M=s.players.filter(G=>G.id!==o.id)[0];return w("div",{style:{display:"flex",flexDirection:"column"},children:[w(y,{textAlign:"center",variant:"h5",children:[h==null?void 0:h.username,"(",h==null?void 0:h.counter,") vs ",M==null?void 0:M.username,"(",M==null?void 0:M.counter,")"]}),l(de,{gameboard:f,makeMove:m}),w(Z,{maxWidth:"sm",sx:{display:"flex",flexDirection:"column"},children:[l(C,{}),(b||v)&&l(S,{variant:"contained",onClick:n,children:"Return to Lobby"})]})]})},fe=({username:o,cancelFindingGame:s})=>w(R,{sx:{display:"flex",flexDirection:"column"},children:[l(y,{variant:"h2",children:o}),w(R,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"17.5em"},children:[l(y,{variant:"h5",children:"Searching for a game"}),l(L,{})]}),l(S,{variant:"contained",onClick:s,children:"Cancel"})]}),j={id:"0",rows:6,columns:7},D=[j,{id:"1",rows:4,columns:5},{id:"2",rows:5,columns:6},{id:"3",rows:7,columns:8},{id:"4",rows:7,columns:8},{id:"5",rows:7,columns:9},{id:"6",rows:7,columns:10},{id:"7",rows:8,columns:8}],me=({gameboardSize:o,setGameboardSize:s})=>{const n=(t,i)=>s(D.find(f=>f.id===i)),c=(t,i)=>t.rows-i.rows;return l(ee,{sx:{justifyContent:"center"},value:o.id,exclusive:!0,onChange:n,"aria-label":"text alignment",children:D.sort(c).map(t=>w(ne,{sx:{textAlign:"center",padding:"0.4em"},value:t.id,children:[t.rows," x ",t.columns]},t.id))})},xe=({username:o,setUsername:s})=>{const n=c=>s(c.target.value);return l(te,{inputProps:{sx:{textAlign:"center "}},value:o!=null?o:"",onChange:n,placeholder:"Enter username..."})},ge=({gameboardSize:o,setGameboardSize:s,username:n,setUsername:c,onStartClick:t})=>w($,{sx:{display:"flex",flexDirection:"column",maxWidth:"fit-content"},children:[l(y,{textAlign:"center",variant:"h4",children:"\u{1F534} Connect Four \u{1F7E1}"}),l(xe,{username:n,setUsername:c}),l("hr",{style:{width:"100%"}}),l(y,{variant:"caption",textAlign:"center",children:"Rows x Columns"}),l(me,{gameboardSize:o,setGameboardSize:s}),l("hr",{style:{width:"100%"}}),l(S,{variant:"contained",onClick:t,children:"Find Game"})]}),he=(o,s,n)=>re(o,{query:{username:s,boardSizeId:n}}),pe=()=>"http://localhost:3001",we=(o,s)=>{const[n,c]=p.exports.useState(),[t,i]=p.exports.useState("Idle"),[f,m]=p.exports.useState();return p.exports.useEffect(()=>{if(!!n)return n.on("found game",C=>{i("Found game"),m(C)}),()=>{n==null||n.disconnect()}},[n]),{beginFindingGame:()=>{if(!o)return;const C=pe();i("Finding game"),c(he(C,o,s))},endGame:()=>{i("Idle"),m(void 0),n==null||n.disconnect()},gameState:t,foundGame:f,socket:n}},Me=()=>{const[o,s]=p.exports.useState(),[n,c]=p.exports.useState(j),{beginFindingGame:t,endGame:i,foundGame:f,gameState:m,socket:b}=we(o,n.id);return w("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:[m==="Idle"&&l(ge,{username:o,setUsername:s,gameboardSize:n,setGameboardSize:c,onStartClick:t}),m==="Finding game"&&o&&l(fe,{username:o,cancelFindingGame:i}),m==="Found game"&&f&&b&&l(ue,{socket:b,game:f,finishGame:i,columns:n.columns,rows:n.rows,contiguousCountersToWin:4})]})};oe.render(l(ie.StrictMode,{children:l(Me,{})}),document.getElementById("root"));
