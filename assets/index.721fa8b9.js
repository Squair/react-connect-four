import{j as c,G as E,B as v,T as y,r as p,a as b,b as $,c as B,C as _,d as ee,R as ne,e as te}from"./vendor.acd38ed5.js";const re=function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))u(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&u(a)}).observe(document,{childList:!0,subtree:!0});function m(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function u(r){if(r.ep)return;r.ep=!0;const l=m(r);fetch(r.href,l)}};re();const ie=({gridItem:i,size:d,column:m,makeMove:u})=>c(E,{item:!0,xs:d,sx:{zIndex:2,display:"flex",justifyContent:"center",alignItems:"center"},children:c(v,{onClick:()=>u(m),children:c(y,{fontSize:"8vmin",sx:{textShadow:"0px 4px 4px #1F1F1F",transition:"margin 200ms"},children:i})})}),oe=({socket:i,game:d,finishGame:m,columns:u,rows:r,contiguousCountersToWin:l})=>{const a=(e,n)=>{const o=[];for(let s=0;s<n;s++)o[s]=new Array(e).fill("\u26AA");return o},[h,M]=p.exports.useState(a(u,r)),[g,w]=p.exports.useState(),[A,G]=p.exports.useState(!1),[C,O]=p.exports.useState(d.firstPlayerToMove);p.exports.useEffect(()=>{i.on("recieve move",e=>{const n=I(e.counter,e.column);if(M(n.newGameboard),n.rowAdded&&j(n.newGameboard,e.counter,n.rowAdded,e.column))return w(S(e.counter));if(R(n.newGameboard))return G(!0);F(e.opposingPlayerId)}),g&&i.disconnect()},[i,g]);const F=e=>O(d.players.filter(n=>n.id===e)[0]),S=e=>d.players.filter(n=>n.counter===e)[0],k=()=>d.players.filter(e=>e.id!==i.id)[0].id,z=()=>!g&&i.id===C.id,N=e=>{if(!z())return;const n=C.counter,o=I(n,e);M(o.newGameboard);const s=k(),t={opposingPlayerId:s,counter:n,column:e};if(i.emit("send move",t),o.rowAdded&&j(o.newGameboard,n,o.rowAdded,e))return w(S(n));if(R(o.newGameboard))return G(!0);F(s)},I=(e,n)=>{if(D(h,n))return{rowAdded:void 0,newGameboard:h};const o=[...h];let s;for(let t=r-1;t>=0;t--)if(o[t][n]==="\u26AA"){o[t][n]=e,s=t;break}return{rowAdded:s,newGameboard:o}},R=e=>{for(let n=0;n<u;n++)if(!D(e,n))return!1;return!0},D=(e,n)=>e[0][n]!=="\u26AA",j=(e,n,o,s)=>{let t=0,f;for(let x=0;x<=u-1;x++)if(t=e[o][x]===n?t+1:0,t===l)return!0;t=0;for(let x=r-1;x>=0;x--)if(t=e[x][s]===n?t+1:0,t===l)return!0;const{descMinRow:K,descMaxRow:J}=P(o,s,r,u),{descMinCol:L,descMaxCol:Q}=T(o,s,r,u);t=0,f=L;for(let x=K;x<=J;x++){if(t=e[x][f]===n?t+1:0,t===l)return!0;if(f===Q)break;f++}const{ascMinRow:V,ascMaxRow:X}=U(o,s,r,u),{ascMinCol:Y,ascMaxCol:Z}=W(o,s,r,u);t=0,f=Y;for(let x=X;x>=V;x--){if(t=e[x][f]===n?t+1:0,t===l)return!0;if(f===Z)break;f++}return!1},P=(e,n,o,s)=>{const t=Math.max(0,e-n),f=Math.min(o-1,s-n+e);return{descMinRow:t,descMaxRow:f}},T=(e,n,o,s)=>{const t=Math.max(0,n-e),f=Math.min(s-1,o-1-e+n);return{descMinCol:t,descMaxCol:f}},U=(e,n,o,s)=>{const t=Math.min(o-1,e+n);return{ascMinRow:Math.max(0,e-(s-1-n)),ascMaxRow:t}},W=(e,n,o,s)=>{const t=Math.max(0,n-(o-1-e)),f=Math.min(s-1,s-1-e+n);return{ascMinCol:t,ascMaxCol:f}},q=()=>h.map((e,n)=>e.map((o,s)=>c(ie,{gridItem:o,size:1,column:s,makeMove:N},`${n}${s}`))),H=()=>{let e;return g?e=`${g.username}(${g.counter}) has won!`:A?e="Draw!":e=`${C.username}'s (${C.counter}) turn!`,c(y,{variant:"h5",children:e})};return b($,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[c(E,{container:!0,columns:u,sx:{zIndex:1,background:"radial-gradient(circle, rgba(42,42,242,1) 83%, rgba(42,42,242,1) 98%, rgba(0,168,255,1) 100%, rgba(2,0,36,1) 100%, rgba(2,0,36,1) 100%, rgba(0,212,255,1) 100%)",width:"95%",boxShadow:"-5px 7px 25px 2px rgba(0,0,0,0.75)"},children:q()}),c("div",{style:{backgroundColor:"blue",border:"1px solid black",width:"97%",height:"3.5em",transform:"skew(29deg, 0deg"},children:b(y,{variant:"h3",textAlign:"center",children:[c("span",{style:{WebkitTextStroke:"50px solid black",color:"red"},children:"Connect"})," ",c("span",{style:{color:"yellow"},children:"Four"})]})}),H(),(g||A)&&c(v,{variant:"contained",onClick:m,children:"Return to Lobby"})]})},se=({socket:i,game:d,finishGame:m,columns:u,rows:r,contiguousCountersToWin:l})=>{const a=d.players.filter(M=>M.id===(i==null?void 0:i.id))[0],h=d.players.filter(M=>M.id!==i.id)[0];return b("div",{style:{display:"flex",flexDirection:"column"},children:[b(y,{textAlign:"center",variant:"h5",children:[a==null?void 0:a.username,"(",a==null?void 0:a.counter,") vs ",h==null?void 0:h.username,"(",h==null?void 0:h.counter,")"]}),c(oe,{socket:i,game:d,finishGame:m,columns:u,rows:r,contiguousCountersToWin:l})]})},ae=({username:i,cancelFindingGame:d})=>b(B,{sx:{display:"flex",flexDirection:"column"},children:[c(y,{variant:"h2",children:i}),b(B,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"17.5em"},children:[c(y,{variant:"h5",children:"Searching for a game "}),c(_,{})]}),c(v,{variant:"contained",onClick:d,children:"Cancel"})]}),ce=({username:i,setUsername:d})=>{const m=u=>d(u.target.value);return c(ee,{value:i!=null?i:"",onChange:m,placeholder:"Enter username..."})},de=({username:i,setUsername:d,onStartClick:m})=>b($,{sx:{display:"flex",flexDirection:"column",maxWidth:"fit-content"},children:[c(y,{textAlign:"left",variant:"h2",children:"Connect Four \u{1F534}\u{1F7E1}"}),c(ce,{username:i,setUsername:d}),c(v,{variant:"contained",onClick:m,children:"Find Game"})]}),le=()=>{const[i,d]=p.exports.useState(),[m,u]=p.exports.useState(!1),[r,l]=p.exports.useState(),[a,h]=p.exports.useState(),M=()=>{if(!!i){u(!0);{console.error("No configuration provided for socket.io host.");return}}},g=()=>u(!1),w=()=>{g(),l(void 0),a==null||a.disconnect()};return p.exports.useEffect(()=>{if(!a)return;const G=C=>{l(C),g()};return a.on("found game",G),()=>{a==null||a.disconnect()}},[a]),b("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:[!m&&!r&&c(de,{username:i,setUsername:d,onStartClick:()=>{!i||M()}}),m&&i&&c(ae,{username:i,cancelFindingGame:w}),r&&a&&c(se,{socket:a,game:r,finishGame:w,columns:7,rows:6,contiguousCountersToWin:4})]})};ne.render(c(te.StrictMode,{children:c(le,{})}),document.getElementById("root"));
