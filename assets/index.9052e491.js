import{r as p,j as d,T as w,G as $,B as F,a as b,b as j,C as V,c as k,d as X,e as Y,l as Z,R as _,f as ee}from"./vendor.f2d3a00e.js";const ne=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const f of a.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&c(f)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}};ne();const te=(r,t)=>{const s=[];for(let c=0;c<t;c++)s[c]=new Array(r).fill("\u26AA");return s},re=(r,t,s,c,i)=>{const[a,f]=p.exports.useState(te(s,c)),[h,G]=p.exports.useState(),[M,v]=p.exports.useState(!1),[g,y]=p.exports.useState(t.firstPlayerToMove);p.exports.useEffect(()=>{r.on("recieve move",e=>{const n=A(e.counter,e.column);if(f(n.newGameboard),n.rowAdded&&D(n.newGameboard,e.counter,n.rowAdded,e.column))return G(S(e.counter));if(I(n.newGameboard))return v(!0);C(e.opposingPlayerId)}),h&&r.disconnect()},[r,h]);const C=e=>y(t.players.filter(n=>n.id===e)[0]),S=e=>t.players.filter(n=>n.counter===e)[0],B=()=>t.players.filter(e=>e.id!==r.id)[0].id,P=()=>!h&&r.id===g.id,E=e=>{if(!P())return;const n=g.counter,l=A(n,e);f(l.newGameboard);const u=B(),o={opposingPlayerId:u,counter:n,column:e};if(r.emit("send move",o),l.rowAdded&&D(l.newGameboard,n,l.rowAdded,e))return G(S(n));if(I(l.newGameboard))return v(!0);C(u)},A=(e,n)=>{if(R(a,n))return{rowAdded:void 0,newGameboard:a};const l=[...a];let u;for(let o=c-1;o>=0;o--)if(l[o][n]==="\u26AA"){l[o][n]=e,u=o;break}return{rowAdded:u,newGameboard:l}},I=e=>{for(let n=0;n<s;n++)if(!R(e,n))return!1;return!0},R=(e,n)=>e[0][n]!=="\u26AA",D=(e,n,l,u)=>{let o=0,m;for(let x=0;x<=s-1;x++)if(o=e[l][x]===n?o+1:0,o===i)return!0;o=0;for(let x=c-1;x>=0;x--)if(o=e[x][u]===n?o+1:0,o===i)return!0;const{descMinRow:N,descMaxRow:H}=O(l,u,c,s),{descMinCol:L,descMaxCol:W}=z(l,u,c,s);o=0,m=L;for(let x=N;x<=H;x++){if(o=e[x][m]===n?o+1:0,o===i)return!0;if(m===W)break;m++}const{ascMinRow:q,ascMaxRow:K}=T(l,u,c,s),{ascMinCol:J,ascMaxCol:Q}=U(l,u,c,s);o=0,m=J;for(let x=K;x>=q;x--){if(o=e[x][m]===n?o+1:0,o===i)return!0;if(m===Q)break;m++}return!1},O=(e,n,l,u)=>{const o=Math.max(0,e-n),m=Math.min(l-1,u-n+e);return{descMinRow:o,descMaxRow:m}},z=(e,n,l,u)=>{const o=Math.max(0,n-e),m=Math.min(u-1,l-1-e+n);return{descMinCol:o,descMaxCol:m}},T=(e,n,l,u)=>{const o=Math.min(l-1,e+n);return{ascMinRow:Math.max(0,e-(u-1-n)),ascMaxRow:o}},U=(e,n,l,u)=>{const o=Math.max(0,n-(l-1-e)),m=Math.min(u-1,u-1-e+n);return{ascMinCol:o,ascMaxCol:m}};return{makeMove:E,gameboard:a,currentPlayer:g,winningPlayer:h,draw:M,GameInformationText:()=>{let e;return h?e=`${h.username}(${h.counter}) has won!`:M?e="Draw!":e=`${g.username}'s (${g.counter}) turn!`,d(w,{textAlign:"center",variant:"h5",children:e})}}},ie=({gridItem:r,size:t,column:s,row:c,makeMove:i})=>{const a=()=>i(s);return d($,{item:!0,xs:t,sx:{zIndex:2,display:"flex",justifyContent:"center",alignItems:"center"},children:d(F,{"aria-label":`${c.toString()}:${s.toString()}`,onClick:a,children:d(w,{fontSize:"8vmin",sx:{textShadow:"0px 4px 4px #1F1F1F",transition:"margin 200ms"},children:r})})})},oe=({gameboard:r,makeMove:t})=>{const s=()=>r.map((c,i)=>c.map((a,f)=>d(ie,{gridItem:a,size:1,row:i,column:f,makeMove:t},`${i}${f}`)));return b(j,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[d($,{container:!0,columns:r[0].length,sx:{zIndex:1,background:"radial-gradient(circle, rgba(42,42,242,1) 83%, rgba(42,42,242,1) 98%, rgba(0,168,255,1) 100%, rgba(2,0,36,1) 100%, rgba(2,0,36,1) 100%, rgba(0,212,255,1) 100%)",width:"95%",boxShadow:"-5px 7px 25px 2px rgba(0,0,0,0.75)"},children:s()}),d("div",{style:{backgroundColor:"blue",border:"1px solid black",width:"97%",height:"3.5em",transform:"skew(29deg, 0deg"},children:b(w,{variant:"h3",textAlign:"center",children:[d("span",{style:{WebkitTextStroke:"50px solid black",color:"red"},children:"Connect"})," ",d("span",{style:{color:"yellow"},children:"Four"})]})})]})},ae=({socket:r,game:t,finishGame:s,columns:c,rows:i,contiguousCountersToWin:a})=>{const{gameboard:f,makeMove:h,winningPlayer:G,draw:M,GameInformationText:v}=re(r,t,c,i,a),g=t.players.filter(C=>C.id===(r==null?void 0:r.id))[0],y=t.players.filter(C=>C.id!==r.id)[0];return b("div",{style:{display:"flex",flexDirection:"column"},children:[b(w,{textAlign:"center",variant:"h5",children:[g==null?void 0:g.username,"(",g==null?void 0:g.counter,") vs ",y==null?void 0:y.username,"(",y==null?void 0:y.counter,")"]}),d(oe,{gameboard:f,makeMove:h}),b(V,{maxWidth:"sm",sx:{display:"flex",flexDirection:"column"},children:[d(v,{}),(G||M)&&d(F,{variant:"contained",onClick:s,children:"Return to Lobby"})]})]})},se=({username:r,cancelFindingGame:t})=>b(k,{sx:{display:"flex",flexDirection:"column"},children:[d(w,{variant:"h2",children:r}),b(k,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"17.5em"},children:[d(w,{variant:"h5",children:"Searching for a game"}),d(X,{})]}),d(F,{variant:"contained",onClick:t,children:"Cancel"})]}),ce=({username:r,setUsername:t})=>{const s=c=>t(c.target.value);return d(Y,{value:r!=null?r:"",onChange:s,placeholder:"Enter username..."})},de=({username:r,setUsername:t,onStartClick:s})=>b(j,{sx:{display:"flex",flexDirection:"column",maxWidth:"fit-content"},children:[d(w,{textAlign:"left",variant:"h2",children:"Connect Four \u{1F534}\u{1F7E1}"}),d(ce,{username:r,setUsername:t}),d(F,{variant:"contained",onClick:s,children:"Find Game"})]}),le=(r,t)=>Z(r,{query:{username:t}}),ue=()=>"https://agile-crag-97738.herokuapp.com",fe=r=>{const[t,s]=p.exports.useState(),[c,i]=p.exports.useState("PreLobby"),[a,f]=p.exports.useState();return p.exports.useEffect(()=>{if(!!t)return t.on("found game",M=>{i("Found game"),f(M)}),()=>{t==null||t.disconnect()}},[t]),{beginFindingGame:()=>{if(!r)return;const M=ue();i("Finding game"),s(le(M,r))},endGame:()=>{i("PreLobby"),t==null||t.disconnect()},gameState:c,foundGame:a,socket:t}},me=()=>{const[r,t]=p.exports.useState(),{beginFindingGame:s,endGame:c,foundGame:i,gameState:a,socket:f}=fe(r);return b("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:[a==="PreLobby"&&d(de,{username:r,setUsername:t,onStartClick:s}),a==="Finding game"&&r&&d(se,{username:r,cancelFindingGame:c}),a==="Found game"&&i&&f&&d(ae,{socket:f,game:i,finishGame:c,columns:7,rows:6,contiguousCountersToWin:4})]})};_.render(d(ee.StrictMode,{children:d(me,{})}),document.getElementById("root"));
