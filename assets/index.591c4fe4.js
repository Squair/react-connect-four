import{j as c,G as B,B as v,T as C,r as g,a as b,b as E,c as j,C as _,d as ee,l as ne,R as te,e as re}from"./vendor.aeda20b6.js";const oe=function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&u(a)}).observe(document,{childList:!0,subtree:!0});function m(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function u(o){if(o.ep)return;o.ep=!0;const l=m(o);fetch(o.href,l)}};oe();const ie=({gridItem:r,size:d,column:m,makeMove:u})=>c(B,{item:!0,xs:d,sx:{zIndex:2,display:"flex",justifyContent:"center",alignItems:"center"},children:c(v,{onClick:()=>u(m),children:c(C,{fontSize:"8vmin",sx:{textShadow:"0px 4px 4px #1F1F1F",transition:"margin 200ms"},children:r})})}),se=({socket:r,game:d,finishGame:m,columns:u,rows:o,contiguousCountersToWin:l})=>{const a=(e,n)=>{const i=[];for(let s=0;s<n;s++)i[s]=new Array(e).fill("\u26AA");return i},[h,M]=g.exports.useState(a(u,o)),[p,w]=g.exports.useState(),[A,G]=g.exports.useState(!1),[y,$]=g.exports.useState(d.firstPlayerToMove);g.exports.useEffect(()=>{r.on("recieve move",e=>{const n=I(e.counter,e.column);if(M(n.newGameboard),n.rowAdded&&k(n.newGameboard,e.counter,n.rowAdded,e.column))return w(S(e.counter));if(R(n.newGameboard))return G(!0);F(e.opposingPlayerId)}),p&&r.disconnect()},[r,p]);const F=e=>$(d.players.filter(n=>n.id===e)[0]),S=e=>d.players.filter(n=>n.counter===e)[0],O=()=>d.players.filter(e=>e.id!==r.id)[0].id,z=()=>!p&&r.id===y.id,N=e=>{if(!z())return;const n=y.counter,i=I(n,e);M(i.newGameboard);const s=O(),t={opposingPlayerId:s,counter:n,column:e};if(r.emit("send move",t),i.rowAdded&&k(i.newGameboard,n,i.rowAdded,e))return w(S(n));if(R(i.newGameboard))return G(!0);F(s)},I=(e,n)=>{if(D(h,n))return{rowAdded:void 0,newGameboard:h};const i=[...h];let s;for(let t=o-1;t>=0;t--)if(i[t][n]==="\u26AA"){i[t][n]=e,s=t;break}return{rowAdded:s,newGameboard:i}},R=e=>{for(let n=0;n<u;n++)if(!D(e,n))return!1;return!0},D=(e,n)=>e[0][n]!=="\u26AA",k=(e,n,i,s)=>{let t=0,f;for(let x=0;x<=u-1;x++)if(t=e[i][x]===n?t+1:0,t===l)return!0;t=0;for(let x=o-1;x>=0;x--)if(t=e[x][s]===n?t+1:0,t===l)return!0;const{descMinRow:K,descMaxRow:J}=H(i,s,o,u),{descMinCol:L,descMaxCol:Q}=P(i,s,o,u);t=0,f=L;for(let x=K;x<=J;x++){if(t=e[x][f]===n?t+1:0,t===l)return!0;if(f===Q)break;f++}const{ascMinRow:V,ascMaxRow:X}=T(i,s,o,u),{ascMinCol:Y,ascMaxCol:Z}=U(i,s,o,u);t=0,f=Y;for(let x=X;x>=V;x--){if(t=e[x][f]===n?t+1:0,t===l)return!0;if(f===Z)break;f++}return!1},H=(e,n,i,s)=>{const t=Math.max(0,e-n),f=Math.min(i-1,s-n+e);return{descMinRow:t,descMaxRow:f}},P=(e,n,i,s)=>{const t=Math.max(0,n-e),f=Math.min(s-1,i-1-e+n);return{descMinCol:t,descMaxCol:f}},T=(e,n,i,s)=>{const t=Math.min(i-1,e+n);return{ascMinRow:Math.max(0,e-(s-1-n)),ascMaxRow:t}},U=(e,n,i,s)=>{const t=Math.max(0,n-(i-1-e)),f=Math.min(s-1,s-1-e+n);return{ascMinCol:t,ascMaxCol:f}},q=()=>h.map((e,n)=>e.map((i,s)=>c(ie,{gridItem:i,size:1,column:s,makeMove:N},`${n}${s}`))),W=()=>{let e;return p?e=`${p.username}(${p.counter}) has won!`:A?e="Draw!":e=`${y.username}'s (${y.counter}) turn!`,c(C,{variant:"h5",children:e})};return b(E,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[c(B,{container:!0,columns:u,sx:{zIndex:1,background:"radial-gradient(circle, rgba(42,42,242,1) 83%, rgba(42,42,242,1) 98%, rgba(0,168,255,1) 100%, rgba(2,0,36,1) 100%, rgba(2,0,36,1) 100%, rgba(0,212,255,1) 100%)",width:"95%",boxShadow:"-5px 7px 25px 2px rgba(0,0,0,0.75)"},children:q()}),c("div",{style:{backgroundColor:"blue",border:"1px solid black",width:"97%",height:"3.5em",transform:"skew(29deg, 0deg"},children:b(C,{variant:"h3",textAlign:"center",children:[c("span",{style:{WebkitTextStroke:"50px solid black",color:"red"},children:"Connect"})," ",c("span",{style:{color:"yellow"},children:"Four"})]})}),W(),(p||A)&&c(v,{variant:"contained",onClick:m,children:"Return to Lobby"})]})},ae=({socket:r,game:d,finishGame:m,columns:u,rows:o,contiguousCountersToWin:l})=>{const a=d.players.filter(M=>M.id===(r==null?void 0:r.id))[0],h=d.players.filter(M=>M.id!==r.id)[0];return b("div",{style:{display:"flex",flexDirection:"column"},children:[b(C,{textAlign:"center",variant:"h5",children:[a==null?void 0:a.username,"(",a==null?void 0:a.counter,") vs ",h==null?void 0:h.username,"(",h==null?void 0:h.counter,")"]}),c(se,{socket:r,game:d,finishGame:m,columns:u,rows:o,contiguousCountersToWin:l})]})},ce=({username:r,cancelFindingGame:d})=>b(j,{sx:{display:"flex",flexDirection:"column"},children:[c(C,{variant:"h2",children:r}),b(j,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"17.5em"},children:[c(C,{variant:"h5",children:"Searching for a game "}),c(_,{})]}),c(v,{variant:"contained",onClick:d,children:"Cancel"})]}),de=({username:r,setUsername:d})=>{const m=u=>d(u.target.value);return c(ee,{value:r!=null?r:"",onChange:m,placeholder:"Enter username..."})},le=({username:r,setUsername:d,onStartClick:m})=>b(E,{sx:{display:"flex",flexDirection:"column",maxWidth:"fit-content"},children:[c(C,{textAlign:"left",variant:"h2",children:"Connect Four \u{1F534}\u{1F7E1}"}),c(de,{username:r,setUsername:d}),c(v,{variant:"contained",onClick:m,children:"Find Game"})]}),ue=()=>{const[r,d]=g.exports.useState(),[m,u]=g.exports.useState(!1),[o,l]=g.exports.useState(),[a,h]=g.exports.useState(),M=()=>{if(!r)return;u(!0);const y=ne("http://localhost:3001",{query:{username:r}});h(y)},p=()=>u(!1),w=()=>{p(),l(void 0),a==null||a.disconnect()};return g.exports.useEffect(()=>{if(!a)return;const G=y=>{l(y),p()};return a.on("found game",G),()=>{a==null||a.disconnect()}},[a]),b("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:[!m&&!o&&c(le,{username:r,setUsername:d,onStartClick:()=>{!r||M()}}),m&&r&&c(ce,{username:r,cancelFindingGame:w}),o&&a&&c(ae,{socket:a,game:o,finishGame:w,columns:7,rows:6,contiguousCountersToWin:4})]})};te.render(c(re.StrictMode,{children:c(ue,{})}),document.getElementById("root"));
