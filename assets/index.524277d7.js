import{r as y,j as d,T as G,G as $,B as A,a as b,b as j,C as V,c as k,d as X,e as Y,l as Z,R as _,f as ee}from"./vendor.d4c9b4d2.js";const ne=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}};ne();const te=(t,o)=>{const s=[];for(let a=0;a<o;a++)s[a]=new Array(t).fill("\u26AA");return s},re=(t,o,s,a,r)=>{const[c,l]=y.exports.useState(te(s,a)),[g,v]=y.exports.useState(),[C,w]=y.exports.useState(!1),[h,p]=y.exports.useState(o.firstPlayerToMove);y.exports.useEffect(()=>{t.on("recieve move",e=>{const n=S(e.counter,e.column);if(l(n.newGameboard),n.rowAdded&&D(n.newGameboard,e.counter,n.rowAdded,e.column))return v(F(e.counter));if(I(n.newGameboard))return w(!0);M(e.opposingPlayerId)}),g&&t.disconnect()},[t,g]);const M=e=>p(o.players.filter(n=>n.id===e)[0]),F=e=>o.players.filter(n=>n.counter===e)[0],B=()=>o.players.filter(e=>e.id!==t.id)[0].id,E=()=>!g&&t.id===h.id,O=e=>{if(!E())return;const n=h.counter,u=S(n,e);l(u.newGameboard);const f=B(),i={opposingPlayerId:f,counter:n,column:e};if(t.emit("send move",i),u.rowAdded&&D(u.newGameboard,n,u.rowAdded,e))return v(F(n));if(I(u.newGameboard))return w(!0);M(f)},S=(e,n)=>{if(R(c,n))return{rowAdded:void 0,newGameboard:c};const u=[...c];let f;for(let i=a-1;i>=0;i--)if(u[i][n]==="\u26AA"){u[i][n]=e,f=i;break}return{rowAdded:f,newGameboard:u}},I=e=>{for(let n=0;n<s;n++)if(!R(e,n))return!1;return!0},R=(e,n)=>e[0][n]!=="\u26AA",D=(e,n,u,f)=>{let i=0,x;for(let m=0;m<=s-1;m++)if(i=e[u][m]===n?i+1:0,i===r)return!0;i=0;for(let m=a-1;m>=0;m--)if(i=e[m][f]===n?i+1:0,i===r)return!0;const{descMinRow:U,descMaxRow:H}=z(u,f,a,s),{descMinCol:W,descMaxCol:q}=T(u,f,a,s);i=0,x=W;for(let m=U;m<=H;m++){if(i=e[m][x]===n?i+1:0,i===r)return!0;if(x===q)break;x++}const{ascMinRow:K,ascMaxRow:J}=N(u,f,a,s),{ascMinCol:L,ascMaxCol:Q}=P(u,f,a,s);i=0,x=L;for(let m=J;m>=K;m--){if(i=e[m][x]===n?i+1:0,i===r)return!0;if(x===Q)break;x++}return!1},z=(e,n,u,f)=>{const i=Math.max(0,e-n),x=Math.min(u-1,f-n+e);return{descMinRow:i,descMaxRow:x}},T=(e,n,u,f)=>{const i=Math.max(0,n-e),x=Math.min(f-1,u-1-e+n);return{descMinCol:i,descMaxCol:x}},N=(e,n,u,f)=>{const i=Math.min(u-1,e+n);return{ascMinRow:Math.max(0,e-(f-1-n)),ascMaxRow:i}},P=(e,n,u,f)=>{const i=Math.max(0,n-(u-1-e)),x=Math.min(f-1,f-1-e+n);return{ascMinCol:i,ascMaxCol:x}};return{makeMove:O,gameboard:c,currentPlayer:h,winningPlayer:g,draw:C,GameInformationText:()=>{let e;return g?e=`${g.username}(${g.counter}) has won!`:C?e="Draw!":e=`${h.username}'s (${h.counter}) turn!`,d(G,{textAlign:"center",variant:"h5",children:e})}}},ie=({gridItem:t,size:o,column:s,row:a,makeMove:r})=>{const c=()=>r(s);return d($,{item:!0,xs:o,sx:{zIndex:2,display:"flex",justifyContent:"center",alignItems:"center"},children:d(A,{"aria-label":`${a.toString()}:${s.toString()}`,onClick:c,children:d(G,{fontSize:"8vmin",sx:{textShadow:"0px 4px 4px #1F1F1F",transition:"margin 200ms"},children:t})})})},oe=({gameboard:t,makeMove:o})=>{const s=()=>t.map((a,r)=>a.map((c,l)=>d(ie,{gridItem:c,size:1,row:r,column:l,makeMove:o},`${r}${l}`)));return b(j,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[d($,{container:!0,columns:t[0].length,sx:{zIndex:1,background:"radial-gradient(circle, rgba(42,42,242,1) 83%, rgba(42,42,242,1) 98%, rgba(0,168,255,1) 100%, rgba(2,0,36,1) 100%, rgba(2,0,36,1) 100%, rgba(0,212,255,1) 100%)",width:"95%",boxShadow:"-5px 7px 25px 2px rgba(0,0,0,0.75)"},children:s()}),d("div",{style:{backgroundColor:"blue",border:"1px solid black",width:"97%",height:"3.5em",transform:"skew(29deg, 0deg"},children:b(G,{variant:"h3",textAlign:"center",children:[d("span",{style:{WebkitTextStroke:"50px solid black",color:"red"},children:"Connect"})," ",d("span",{style:{color:"yellow"},children:"Four"})]})})]})},se=({socket:t,game:o,finishGame:s,columns:a,rows:r,contiguousCountersToWin:c})=>{const{gameboard:l,makeMove:g,winningPlayer:v,draw:C,GameInformationText:w}=re(t,o,a,r,c),h=o.players.filter(M=>M.id===(t==null?void 0:t.id))[0],p=o.players.filter(M=>M.id!==t.id)[0];return b("div",{style:{display:"flex",flexDirection:"column"},children:[b(G,{textAlign:"center",variant:"h5",children:[h==null?void 0:h.username,"(",h==null?void 0:h.counter,") vs ",p==null?void 0:p.username,"(",p==null?void 0:p.counter,")"]}),d(oe,{gameboard:l,makeMove:g}),b(V,{maxWidth:"sm",sx:{display:"flex",flexDirection:"column"},children:[d(w,{}),(v||C)&&d(A,{variant:"contained",onClick:s,children:"Return to Lobby"})]})]})},ae=({username:t,cancelFindingGame:o})=>b(k,{sx:{display:"flex",flexDirection:"column"},children:[d(G,{variant:"h2",children:t}),b(k,{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"17.5em"},children:[d(G,{variant:"h5",children:"Searching for a game "}),d(X,{})]}),d(A,{variant:"contained",onClick:o,children:"Cancel"})]}),ce=({username:t,setUsername:o})=>{const s=a=>o(a.target.value);return d(Y,{value:t!=null?t:"",onChange:s,placeholder:"Enter username..."})},de=({username:t,setUsername:o,onStartClick:s})=>b(j,{sx:{display:"flex",flexDirection:"column",maxWidth:"fit-content"},children:[d(G,{textAlign:"left",variant:"h2",children:"Connect Four \u{1F534}\u{1F7E1}"}),d(ce,{username:t,setUsername:o}),d(A,{variant:"contained",onClick:s,children:"Find Game"})]}),le=()=>{const[t,o]=y.exports.useState(),[s,a]=y.exports.useState(!1),[r,c]=y.exports.useState(),[l,g]=y.exports.useState(),v=()=>{if(!t)return;a(!0);const M=Z("https://agile-crag-97738.herokuapp.com",{query:{username:t}});g(M)},C=()=>a(!1),w=()=>{C(),c(void 0),l==null||l.disconnect()};return y.exports.useEffect(()=>{if(!l)return;const p=M=>{c(M),C()};return l.on("found game",p),()=>{l==null||l.disconnect()}},[l]),b("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:[!s&&!r&&d(de,{username:t,setUsername:o,onStartClick:()=>{!t||v()}}),s&&t&&d(ae,{username:t,cancelFindingGame:w}),r&&l&&d(se,{socket:l,game:r,finishGame:w,columns:7,rows:6,contiguousCountersToWin:4})]})};_.render(d(ee.StrictMode,{children:d(le,{})}),document.getElementById("root"));
